---
import { TECHNOLOGIES } from "../constants/Technologies";
import NextJSIcon from "../icons/frontend/NextJS.astro";
import TailwindIcon from "../icons/frontend/Tailwind.astro";
import ReactIcon from "../icons/frontend/React.astro";
import AngularIcon from "../icons/frontend/Angular.astro";

import NodeJSIcon from "../icons/backend/NodeJs.astro";

import PythonIcon from "../icons/languajes/Python.astro";
import SqlServerIcon from "../icons/databases/SqlServer.astro";

import NetIcon from "../icons/backend/Net.astro";
import CSharpIcon from "../icons/languajes/CSharp.astro";
import SpringIcon from "../icons/backend/Spring.astro";
import DockerIcon from "../icons/Docker.astro";
import GithubIcon from "../icons/Github.astro";
import MySqlIcon from "../icons/databases/MySql.astro";
import MongoDbIcon from "../icons/databases/MongoDb.astro";
import JavaIcon from "../icons/languajes/Java.astro";
import JavaScriptIcon from "../icons/languajes/JavaScript.astro";

// Mapeo de strings a componentes
const ICONS = {
  Java: JavaIcon,
  CSharp: CSharpIcon,
  JavaScript: JavaScriptIcon,
  Python: PythonIcon,

  SqlServer: SqlServerIcon,
  MongoDB: MongoDbIcon,
  MySQL: MySqlIcon,

  Net: NetIcon,
  NodeJs: NodeJSIcon,
  Spring: SpringIcon,

  React: ReactIcon,
  Angular: AngularIcon,
  NextJS: NextJSIcon,
  Tailwind: TailwindIcon,

  Docker: DockerIcon,
  GitHub: GithubIcon,
};

// Convertir el objeto a array
const techArray = Object.values(TECHNOLOGIES);
---

<div class="pt-8 pb-4">
  <p class="text-center text-lg font-extralight leading-8 text-gray-400">
    Herramientas y lenguajes con los que he trabajado
  </p>

  <div
    class="logos group relative overflow-hidden whitespace-nowrap py-10 [mask-image:_linear-gradient(to_right,_transparent_0,_white_128px,white_calc(100%-128px),_transparent_100%)]"
  >
    <div
      class="animate-slide-left-infinite group-hover:animation-pause inline-block w-max"
    >
      {
        techArray.map((tech) => {
          const Icon = ICONS[tech.icon];
          return (
            <div
              class={`mx-4 inline-flex items-center gap-3 px-6 py-3 rounded-lg ${tech.class}`}
            >
              {Icon && <Icon class="w-8 h-8" />}
              <span class="text-lg font-medium">{tech.name}</span>
            </div>
          );
        })
      }
    </div>

    <!-- Duplicate for infinite effect -->
    <div
      class="animate-slide-left-infinite group-hover:animation-pause inline-block w-max"
    >
      {
        techArray.map((tech) => {
          const Icon = ICONS[tech.icon];
          return (
            <div
              class={`mx-4 inline-flex items-center gap-3 px-6 py-3 rounded-lg ${tech.class}`}
            >
              {Icon && <Icon class="w-8 h-8" />}
              <span class="text-lg font-medium">{tech.name}</span>
            </div>
          );
        })
      }
    </div>
  </div>
</div>

<style>
  @keyframes slide-left-infinite {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }

  .animate-slide-left-infinite {
    animation: slide-left-infinite 25s linear infinite;
  }

  .group:hover .animation-pause {
    animation-play-state: paused;
  }
</style>
